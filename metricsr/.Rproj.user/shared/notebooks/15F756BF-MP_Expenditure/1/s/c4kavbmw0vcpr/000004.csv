"0","### Reproducible"
"0","# This is the last type"
"0","MPexp2015.v <- MPexp2015 %>% rbind.fill.matrix() %>% as.data.frame()"
"0","# Get rid of NAs"
"0","MPexp2015.v[is.na(MPexp2015.v)] <- """""
"0","# Drop rows that are completely empty"
"0","MPexp2015.v <- MPexp2015.v[!apply(MPexp2015.v == """", 1, all), ]"
"0","MPexp2015.v <- data.frame(lapply(MPexp2015.v, as.character), stringsAsFactors = FALSE) # fix string as factors"
"0","# Remove total row for those special cases"
"0","MPexp2015.v[MPexp2015.v[, 1] == ""Total"", ] <- NA"
"0","# Get rid of NAs"
"0","MPexp2015.v[is.na(MPexp2015.v)] <- """""
"0","# Drop rows that are completely empty"
"0","MPexp2015.v <- MPexp2015.v[!apply(MPexp2015.v == """", 1, all), ]"
"0","MPexp2015.v <- data.frame(lapply(MPexp2015.v, as.character), stringsAsFactors = FALSE) # fix string as factors"
"0","# Remove total row for those special cases"
"0","MPexp2015.v[MPexp2015.v[, 1] == ""2-Travel"", ] <- NA"
"0","# Get rid of NAs"
"0","MPexp2015.v[is.na(MPexp2015.v)] <- """""
"0","# Drop rows that are completely empty"
"0","MPexp2015.v <- MPexp2015.v[!apply(MPexp2015.v == """", 1, all), ]"
"0","for (i in 1:nrow(MPexp2015.v)) {"
"0","  if (MPexp2015.v[i,1] == """" & grepl(""Budgets"",MPexp2015.v[i,3]) & grepl(""Reg. Spec. U.S.A."", MPexp2015.v[i,4])) {"
"0","    MPexp2015.v[i,] <- NA"
"0","  }"
"0","}"
"0","for (i in 1:nrow(MPexp2015.v)) {"
"0","  if (MPexp2015.v[i,1] == """" & grepl(""Budgets"",MPexp2015.v[i,3]) & grepl(""by the House"", MPexp2015.v[i,4])) {"
"0","    MPexp2015.v[i,] <- NA"
"0","  }"
"0","}"
"0","# Get rid of NAs"
"0","MPexp2015.v[is.na(MPexp2015.v)] <- """""
"0","# Drop rows that are completely empty"
"0","MPexp2015.v <- MPexp2015.v[!apply(MPexp2015.v == """", 1, all), ]"
"0","for (i in 1:nrow(MPexp2015.v)) {"
"0","    if (MPexp2015.v[i,1] %>% grepl(""From"", .)) {"
"0","        MPexp2015.v[i,1] <- """""
"0","    }"
"0","}"
"0","for (i in 1:nrow(MPexp2015.v)) {"
"0","    if (MPexp2015.v[i,1] %>% grepl(""2015"", .)) {"
"0","        MPexp2015.v[i,] <- NA"
"0","    }"
"0","}"
"0","for (i in 1:nrow(MPexp2015.v)) {"
"0","    if (MPexp2015.v[i,1] %>% grepl(""2016"", .)) {"
"0","        MPexp2015.v[i,] <- NA"
"0","    }"
"0","}"
"0","# Get rid of NAs"
"0","MPexp2015.v[is.na(MPexp2015.v)] <- """""
"0","# Drop rows that are completely empty"
"0","MPexp2015.v <- MPexp2015.v[!apply(MPexp2015.v == """", 1, all), ]"
"0","for (i in 1:nrow(MPexp2015.v)) {"
"0","    if (MPexp2015.v[i,1] == """" & MPexp2015.v[i,2] == """"){"
"0","     MPexp2015.v[i-1, 3] <- paste(MPexp2015.v[i-1, 3], MPexp2015.v[i, 3])"
"0","     MPexp2015.v[i,] <- NA"
"0","    }"
"0","}"
"0","# Get rid of NAs"
"0","MPexp2015.v[is.na(MPexp2015.v)] <- """""
"0","# Drop rows that are completely empty"
"0","MPexp2015.v <- MPexp2015.v[!apply(MPexp2015.v == """", 1, all), ]"
"0","for (i in 1:nrow(MPexp2015.v)) {"
"0","    "
"0","    if (MPexp2015.v[i,2] != """") {"
"0","      MPexp2015.v[i,6] <- MPexp2015.v[i,5]"
"0","      MPexp2015.v[i,5] <- MPexp2015.v[i,4]"
"0","      MPexp2015.v[i,4] <- MPexp2015.v[i,3]"
"0","      MPexp2015.v[i,3] <- MPexp2015.v[i,2]"
"0","    }"
"0","    "
"0","}"
"0","#Drop second column"
"0","MPexp2015.v <- MPexp2015.v[,-2]  "
"0","#Remove commas"
"0","for (j in 2:ncol(MPexp2015.v)) {"
"0","  for (i in 1:nrow(MPexp2015.v)){"
"0","    MPexp2015.v[i,j] <- gsub("","", """", MPexp2015.v[i,j])"
"0","  }"
"0","}"
"0","for (i in 1:nrow(MPexp2015.v)){"
"0","    if( grepl(""- [[:digit:]]"",MPexp2015.v[i,3]) & MPexp2015.v[i,2] == """") {"
"0","    MPexp2015.v[i,3] <- str_extract(MPexp2015.v[i,3], ""[[:digit:]]+\\.*[[:digit:]]*"")"
"0","    MPexp2015.v[i,2] <- c(""-"")"
"0","    MPexp2015.v[i,4] <- c(""-"")"
"0","        }"
"0","}"
"0","for (i in 1:nrow(MPexp2015.v)) {"
"0","  if(grepl(""- [[:digit:]]"",MPexp2015.v[i,2])){"
"0","     MPexp2015.v[i,3] <- str_extract(MPexp2015.v[i,2], ""[[:digit:]]+\\.*[[:digit:]]*"")"
"0","     MPexp2015.v[i,2] <- c("""")"
"0","  }"
"0","}"
"0","for (i in 1:nrow(MPexp2015.v)) {"
"0","  if(grepl(""[[:digit:]] -"",MPexp2015.v[i,2])){"
"0","     MPexp2015.v[i,2] <- str_extract(MPexp2015.v[i,2], ""[[:digit:]]+\\.*[[:digit:]]*"")"
"0","     MPexp2015.v[i,3] <- c(""-"")"
"0","  }"
"0","}"
"0"," for (i in 1:nrow(MPexp2015.v)) {"
"0","   if(grepl(""[[:digit:]] [[:digit:]]"",MPexp2015.v[i,2])){"
"0","      MPexp2015.v[i,3] <- str_extract(MPexp2015.v[i,2], "" [[:digit:]]+\\.*[[:digit:]]*"")"
"0","      MPexp2015.v[i,2] <- str_extract(MPexp2015.v[i,2], ""[[:digit:]]+\\.*[[:digit:]]*"")"
"0","   }"
"0"," }"
"0","#31"
"0","for (i in 1:nrow(MPexp2015.v)) {"
"0","  if(grepl(""Budgets"", MPexp2015.v[i,2]) & grepl(""by the House"", MPexp2015.v[i,3]) & grepl(""Reg"", MPexp2015.v[i,4])) {"
"0","    MPexp2015.v[i,] <- NA"
"0","  }"
"0","}"
"0","for (i in 1:nrow(MPexp2015.v)) {"
"0","  if(grepl(""2014"", MPexp2015.v[i,1])) {"
"0","    MPexp2015.v[i,] <- NA"
"0","  }"
"0","}"
"0","# Get rid of NAs"
"0","MPexp2015.v[is.na(MPexp2015.v)] <- """""
"0","# Drop rows that are completely empty"
"0","MPexp2015.v <- MPexp2015.v[!apply(MPexp2015.v == """", 1, all), ]"
"0"," "
"0","# Get rid of NAs"
"0","MPexp2015.v[is.na(MPexp2015.v)] <- """""
"0","# Drop rows that are completely empty"
"0","MPexp2015.v <- MPexp2015.v[!apply(MPexp2015.v == """", 1, all), ]"
"0","datalist = list()"
"0","for (i in seq(from = 1 , to = nrow(MPexp2015.v), by =31)) {"
"0","  "
"0","  j <- i+1  #2"
"0","  k <- i+2  #3"
"0","  l <- i+30 #31"
"0","  "
"0","  a <- cbind("
"0","    rbind(MPexp2015.v[i:j, 1:5],c(MPexp2015.v[j,1],"""","""","""",""""),c(MPexp2015.v[j,1],"""","""","""",""""),c(MPexp2015.v[j,1],"""","""","""","""")),"
"0","          MPexp2015.v[k:l,] %>% transpose()"
"0","  )"
"0","  datalist[[i]] <- a "
"0","  "
"0","}"
"0","MPexp2015.f <- do.call(rbind, datalist)"
"0","for (i in 1:ncol(MPexp2015.f)) {"
"0","  colnames(MPexp2015.f)[i] <- (paste(""C"", i, sep = """"))"
"0","}"
"0","for (i in 1:nrow(MPexp2015.f)) {"
"0","  for (j in 7:ncol(MPexp2015.f)){"
"0","    MPexp2015.f[i,j] <- gsub(""-"", ""0"", MPexp2015.f[i,j])"
"0","  }"
"0","}"
"0","for (i in 1:nrow(MPexp2015.f)) {"
"0","  for (j in 7:ncol(MPexp2015.f)){"
"0","    if (MPexp2015.f[i,j] == """"){"
"0","      MPexp2015.f[i,j] <- ""0"""
"0","    }"
"0","  }"
"0","}"
"0","for (i in 1:nrow(MPexp2015.f)) {"
"0","  for (j in 7:ncol(MPexp2015.f)){"
"0","    if (MPexp2015.f[i,j] == ""0 0""){"
"0","      MPexp2015.f[i,j] <- ""0"""
"0","    }"
"0","  }"
"0","}"
"0","for (i in seq(from = 1, to = nrow(MPexp2015.f), by = 5)) {"
"0","   for(j in 7:ncol(MPexp2015.f)){"
"0","      MPexp2015.f[i+3,j] <- as.numeric(MPexp2015.f[i+1,j])+as.numeric(MPexp2015.f[i+2,j])"
"0"," } "
"0","}"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"2","NAs introduced by coercion"
"0","# Get rid of NAs"
"0","MPexp2015.f[is.na(MPexp2015.f)] <- ""0"""
"0","for (i in 1:nrow(MPexp2015.f)) {"
"0","  if (MPexp2015.f[i,2] == """" | MPexp2015.f[i,2] == ""Active"") {"
"0","    MPexp2015.f[i,2] <- MPexp2015.f[i,3]"
"0","    MPexp2015.f[i,3] <- MPexp2015.f[i,4]"
"0","    MPexp2015.f[i,4] <- MPexp2015.f[i,5]"
"0","  }"
"0","}"
"0","MPexp2015.f <- MPexp2015.f[,-5]"
"0","for (i in 1:ncol(MPexp2015.f)) {"
"0","  colnames(MPexp2015.f)[i] <- (paste(""C"", i, sep = """"))"
"0","}"
"0","MPexp2015.f <- MPexp2015.f[seq(from = -6, to = -nrow(MPexp2015.f), by = -5), ]"
"0","MPexp2015.f <- MPexp2015.f[seq(from = -5, to = -nrow(MPexp2015.f), by = -4), ]"
"0","MPexp2015.f <- MPexp2015.f[-1,-28]"
"0","colnames(MPexp2015.f) <- c(""Member"",           "
"0","                           ""Constituency name"",                                     "
"0","                           ""Constituency size"",           "
"0","                           ""Number of electors"",           "
"0","                           ""Category"",           "
"0","                           ""1-Employees' salaries"","
"0","                           ""Service contracts"",           "
"0","                           ""2-Travel"",           "
"0","                           ""Member"",           "
"0","                           ""Designated traveller"",           "
"0","                           ""Dependants"",           #"
"0","                           ""Employees"",           #"
"0","                           ""Member's accommodation expenses"",#"
"0","                           ""Member's per diem expense and per diem expenses"",           #12"
"0","                           ""Member's secondary residence expenses"",           #13"
"0","                           ""4-Hospitality"",           #14"
"0","                           ""5-Gifts"","
"0","                           ""6-Advertising"",           #15"
"0","                           ""7-Printing"",           #16"
"0","                           ""Householders"",           #17"
"0","                           ""Ten percenters"",           #18"
"0","                           ""Other printing-related expenses"",           #19"
"0","                           ""8-Offices"",           #20"
"0","                           ""Constituency office leases, insurance and utilities"",           #21"
"0","                           ""Furniture, furnishing and equipment purchases"",           #22"
"0","                           ""Equipment rentals"",           #23"
"0","                           ""Informatics and telecommunication equipment purchases"",      #24"
"0","                           ""Telecommunication services"",      #25"
"0","                           ""Repairs and maintenance"",      #26"
"0","                           ""Postage and courier services"",      #27"
"0","                           ""Materials and supplies"",      #28"
"0","                           ""Training"")      #29"
"0","names <- c(""Member's Budgets ($)"", ""Resources Provided by the House ($)"", ""Total ($)"")"
"0","for (i in seq(from = 1, to = nrow(MPexp2015.f), by = 3)) {"
"0","  MPexp2015.f[i,5]   <- names[1]"
"0","  MPexp2015.f[i+1,5] <- names[1+1]"
"0","  MPexp2015.f[i+2,5] <- names[1+2]"
"0","}"
"0","# Get rid of NAs"
"0","MPexp2015.f[is.na(MPexp2015.f)] <- ""0"""
"0","#Make table | use excel instead of csv since csv will split the name because of the comma"
"0","setwd(""/Users/WilliamLS/Dropbox/R/RA/Vinayak/FinalExpTab"")"
"2","The working directory was changed to /Users/WilliamLS/Dropbox/R/RA/Vinayak/FinalExpTab inside a notebook chunk. The working directory will be reset when the chunk is finished running. Use the knitr root.dir option in the setup chunk to change the working directory for notebook chunks."
"0","write.xlsx(MPexp2015.f, ""MPexp2015.xlsx"")"
